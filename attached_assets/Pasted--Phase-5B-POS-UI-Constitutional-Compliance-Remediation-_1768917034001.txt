
Phase 5B ‚Äî POS UI Constitutional Compliance Remediation

‚∏ª

CONTEXT

You are operating as an implementation platform (Replit) for the WebWaka Modular Platform.

This task is a REMEDIATION, not a new feature build.

The POS UI already exists, deploys correctly, and tests pass ‚Äî
however, it violates the WebWaka Ecosystem Constitution by re-implementing control logic in the UI instead of consuming canonical control layers.

Your responsibility is to restore constitutional compliance without rewriting the UI.

‚∏ª

SOURCE OF TRUTH

GitHub Repo (MUST be used):
changerplanet/webwaka-suite-pos-ui

Canonical Control Layers (ALREADY IMPLEMENTED):
	‚Ä¢	webwaka-suite-pos-control
	‚Ä¢	webwaka-core-dashboard-control

‚∏ª

HARD NON-NEGOTIABLE RULES

üö´ DO NOT redesign UI
üö´ DO NOT introduce new features
üö´ DO NOT hardcode permissions, entitlements, or feature flags
üö´ DO NOT re-implement gating logic
üö´ DO NOT mock control logic in runtime code
üö´ DO NOT change routing or visual layout

‚úÖ You MUST consume existing control layers exactly

‚∏ª

OBJECTIVE (MANDATORY)

Bring the POS UI into full constitutional compliance by making it a pure declarative consumer of:
	‚Ä¢	webwaka-suite-pos-control (suite declarations)
	‚Ä¢	webwaka-core-dashboard-control (resolution engine)

‚∏ª

REQUIRED ACTIONS (EXECUTE IN ORDER)

‚∏ª

1Ô∏è‚É£ CLONE & VERIFY REPO
	1.	Clone:

changerplanet/webwaka-suite-pos-ui


	2.	Confirm:
	‚Ä¢	Branch: main
	‚Ä¢	UI already renders and tests pass before changes

‚ùó If repo cannot be cloned ‚Üí STOP IMMEDIATELY

‚∏ª

2Ô∏è‚É£ INSTALL CONTROL DEPENDENCIES

Add real dependencies (not dev, not mock):

npm install webwaka-suite-pos-control webwaka-core-dashboard-control

Verify they appear in package.json under dependencies.

‚∏ª

3Ô∏è‚É£ REMOVE ALL RUNTIME MOCK CONTROL DATA

Delete or disable completely from runtime paths:
	‚Ä¢	Mock permissions
	‚Ä¢	Mock entitlements
	‚Ä¢	Mock feature flags
	‚Ä¢	Mock dashboard sections
	‚Ä¢	Any fallback logic like:

if (!controlData) useMock()



Mocks are allowed ONLY inside test files, never in app code.

‚∏ª

4Ô∏è‚É£ REWIRE UI TO CONTROL ENGINE (CRITICAL)

Refactor UI so that:
	‚Ä¢	Dashboard sections are imported from:

webwaka-suite-pos-control


	‚Ä¢	Visibility resolution is done ONLY via:

resolveDashboard(...)

from:

webwaka-core-dashboard-control


	‚Ä¢	UI receives:
	‚Ä¢	ResolvedDashboard
	‚Ä¢	DashboardSnapshot

The UI must:
	‚Ä¢	Render exactly what the resolver returns
	‚Ä¢	Display visibility reasons where provided
	‚Ä¢	Never inspect permissions directly

‚∏ª

5Ô∏è‚É£ SNAPSHOT MODE COMPLIANCE

Ensure the UI:
	‚Ä¢	Can render from:
	‚Ä¢	live resolution
	‚Ä¢	verified snapshot
	‚Ä¢	Does NOT recompute access rules when snapshot is used
	‚Ä¢	Rejects expired or tampered snapshots

‚∏ª

6Ô∏è‚É£ UPDATE TESTS (MANDATORY)

Update tests so that:
	‚Ä¢	Tests FAIL if:
	‚Ä¢	control packages are removed
	‚Ä¢	resolver is bypassed
	‚Ä¢	Visibility changes when control declarations change
	‚Ä¢	Snapshot evaluation matches live evaluation

Mocking is allowed ONLY at control package boundary.

‚∏ª

7Ô∏è‚É£ FINAL VERIFICATION CHECKLIST (MUST PASS)

Confirm ALL are TRUE:
	‚Ä¢	UI imports from webwaka-suite-pos-control
	‚Ä¢	UI imports from webwaka-core-dashboard-control
	‚Ä¢	No permission/entitlement logic in UI
	‚Ä¢	No runtime mock control data
	‚Ä¢	Tests validate real control consumption
	‚Ä¢	App builds and runs
	‚Ä¢	Push to main

‚∏ª

8Ô∏è‚É£ COMMIT & PUSH

Commit message (exact):

fix(pos-ui): enforce constitutional control consumption

Push to:

main

Vercel must auto-deploy.

‚∏ª

REQUIRED FINAL OUTPUT

Return a short report containing:
	1.	Confirmation that:
	‚Ä¢	Control packages are installed
	‚Ä¢	UI imports them directly
	2.	File paths showing:
	‚Ä¢	Where control declarations are consumed
	‚Ä¢	Where resolveDashboard is called
	3.	Confirmation:
	‚Ä¢	No runtime mocks exist
	4.	Commit SHA

‚∏ª

HARD STOP

‚õî Do NOT proceed to any new feature
‚õî Do NOT touch other repos
‚õî Stop after remediation and report

‚∏ª

ACKNOWLEDGEMENT REQUIRED

Reply only with:

‚ÄúI acknowledge and will remediate Phase 5B strictly as instructed.‚Äù

Then proceed.